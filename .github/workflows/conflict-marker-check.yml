name: 'Check for merge conflict markers'

on:
  push:
  pull_request:

jobs:
  conflict-check:
    name: Check for conflict markers
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Check repository for conflict markers
        run: |
          echo "Searching for Git conflict markers in the repo..."
          if grep -R --line-number -E '^(<<<<<<<|>>>>>>>|=======$)' --exclude-dir=.git . ; then
            echo "\nERROR: Merge conflict markers detected. Please resolve them before committing.";
            exit 1;
          else
            echo "No conflict markers found.";
          fi
